---
title: "Ayudant√≠a 1: Repaso RStudio y funciones b√°sicas"
subtitle: "Metodolog√≠a Cuantitativa con RStudio"
author: "Francesca Alejandra Roco"
date: "Primer semestre 2025"
output: 
  html_document:
    toc: true
    toc_depth: 3
    toc_float: true
    collapsed: true
    smooth_scroll: true
    theme: journal
    highlight: kate
    df_print: paged
    code_folding: show
---

A lo largo de este curso utilizaremos R Markdown para practicar y ejeritar durante las ayudant√≠as.  

# `Markdown`
#### 1. ¬øPara qu√© nos sirve Markdown?
R Markdown es una herramienta que permite combinar texto con c√≥digo en un mismo documento. Nos sirve para:

* Redactar informes reproducibles combinando an√°lisis estad√≠stico y texto explicativo.
* Crear documentos din√°micos en diversos formatos como HTML, PDF o Word.
* Organizar el trabajo de investigaci√≥n en un solo archivo que integre datos, c√≥digo y explicaciones.
* Facilitar la comunicaci√≥n de resultados de investigaci√≥n en antropolog√≠a y otras ciencias sociales.

#### 2. ¬øC√≥mo crear un script (hoja) en Markdown?
Para crear un archivo en R Markdown dentro de RStudio:

* Abre RStudio.

* Ve a File (Archivo) > New File (Nuevo Archivo) > R Markdown....

* Selecciona el formato de salida deseado (HTML, PDF o Word).

* Escribe un t√≠tulo y autor para el documento.

* Haz clic en OK. Se abrir√° un nuevo documento con estructura b√°sica de R Markdown.

#### 3. ¬øC√≥mo usarlo?
* En la parte superior del documento se encuentra el encabezado YAML, donde se define el t√≠tulo, autor y formato de salida.

* El contenido del documento se escribe en Markdown, incluyendo texto y c√≥digo de R.

* Se pueden ejecutar bloques de c√≥digo directamente dentro del documento y ver los resultados en la salida.

* Para generar el documento final, se presiona el bot√≥n Knit (Tejer) en RStudio.

#### 4. Formato b√°sico 
Markdown permite dar formato al texto de manera sencilla:

##### Tama√±o de la letra (t√≠tulos y subt√≠tulos)

* Los t√≠tulos principales se colocan con #
* Los subtitulos con ## 
* Y los subsubt√≠tulos con ### 

De esta forma se va dando tama√±o a la letra. Mientras m√°s gatos tenga, m√°s peque√±a ser√° la letra. 

##### Otros s√≠mbolos para establecer formato al texto:

Negrita: **texto** o __texto__

Cursiva: *texto* o _texto_

##### Listas:

- Elemento 1

- Elemento 2

* Elemento 3

##### Encabezados:

C√≥digo en l√≠nea: `c√≥digo`

Bloques de c√≥digo:
```{r}
suma <- 2 + 2
print(suma)
```

#### 5. Funciones b√°sicas de ejecuci√≥n
* Insertar un bloque de c√≥digo: **Ctrl + Alt + I** (Windows) o **Cmd + Option + I** (Mac) para agregar un bloque de c√≥digo.

* Ejecutar c√≥digo dentro de un bloque: Ubica el cursor en el bloque y presiona **Ctrl + Enter**. (es b√°sicamente correr el c√≥digo)

* Compilar el documento y actualizar cambios: **Ctrl + Alt + K** (Windows) o **Cmd + Shift + K** (Mac) 

* Tejer el documento: Presiona el bot√≥n **Knit** en la parte superior para generar el archivo de salida en HTML, PDF o Word.

Es necesario entender a Markdown como una herramienta dentro de RStudio. Finalmente vamos a trabajar en RStudio, como el semestre pasado, pero esta vez lo haremos en formato markdown para que puedan ir guardando sus clases en un documento m√°s f√°cil de visualizar y entender.



# Operaciones b√°sicas
#### I. R como calculadora

#### II. Funciones b√°sicas

#### III. Lenguaje orientado a objetos

#### IV. Indexaci√≥n

#### V. Tipos de Variables y Estructuras de Datos en R

#### VI. Data frames

----
# I. R como calculadora

* Suma y resta
* Multiplicaci√≥n y divisi√≥n
* Potencias

Ejecuta y mira el resultado de las siguientes operaciones:
```{r}
# Suma y resta
21 + 12
11 - 2
```

```{r}
# Multiplicaci√≥n y divisi√≥n
6 * 8
45 / 5
```

```{r}
# Potencias y ra√≠ces
2 ^ 3  # 2 elevado a 3
```


### üî∂ ¬°Ejercicio! An√°lisis de la Poblaci√≥n con calculadora

Imagina que est√°s realizando una investigaci√≥n sobre una peque√±a poblaci√≥n que vive en distintas √°reas rurales. Tienes los siguientes datos:

* Edad de 10 personas (en a√±os)
* Ingresos mensuales de las personas (en CLP)
* A√±os de escolaridad (relacionados con el acceso a la educaci√≥n en zonas rurales vs. urbanas)

Tus objetivos son calcular estad√≠sticas culturales relacionadas con los ingresos, la educaci√≥n y la edad, y mezclar varias operaciones matem√°ticas para hacer un an√°lisis m√°s profundo.

üîπ Datos:

* Edad (en a√±os) de las personas: 31, 53, 35, 61, 46, 29, 45, 50, 22, 27

* Ingresos mensuales (en CLP) : 480000, 150000, 300000, 120000, 250000, 340000, 240000, 620000, 550000, 450000

* A√±os de escolaridad : 5, 1, 3, 0, 2, 4, 3, 8, 6, 5

#### üìç Calcule el total de Edad y Promedio de Ingresos y Escolaridad:

#### 1. Total de las edades : Suma de todas las edades de la poblaci√≥n.

#### 2. Promedio de ingresos : Calcula el ingreso promedio mensual de la poblaci√≥n.

#### 3. Promedio de a√±os de escolaridad : Calcula el promedio de a√±os de escolaridad de la poblaci√≥n.

```{r}




```


# II. Funciones b√°sicas
Descriptivas:
* sum()
* mean()
* median()
* min()
* max()

Podemos realizar el mismo ejercicio anterior, pero esta vez con funciones:
```{r}
# Total de edades
sum(c(31, 53, 35, 61, 46, 29, 45, 50, 22, 27))
```

```{r}
# Promedio de ingresos
mean(c(480000, 150000, 300000, 120000, 250000, 340000, 240000, 620000, 550000, 450000))
```

```{r}
# Promedio de a√±os de escolaridad
mean(c(5, 1, 3, 0, 2, 4, 3, 8, 6, 5))
```

### üî∂ ¬°Ejercicio! An√°lisis de la Poblaci√≥n con funciones

#### a) Promedio y mediana
Calcula la media y la mediana de las edades, ingresos y a√±os de escolaridad. Estas dos medidas te ayudar√°n a comprender c√≥mo se distribuyen estos factores en la poblaci√≥n.

* Promedio de las edades
* Promedio de los ingresos
* Promedio de los a√±os de escolaridad
* Mediana de las edades
* Mediana de los ingresos
* Mediana de los a√±os de escolaridad

#### b) Rangos
##### Desigualdad en la Comunidad
Para comprender mejor c√≥mo se distribuyen los recursos, vamos a *calcular los valores m√°ximos y m√≠nimos de las edades, los ingresos y los a√±os de escolaridad*. Esto te permitir√° identificar las diferencias m√°s grandes en los datos.

* Edad m√≠nima y edad m√°xima
* Ingreso m√≠nimo e ingreso m√°ximo
* A√±os de escolaridad m√≠nimo y m√°ximo

##### Reflexi√≥n sobre desigualdades
Calcule:

* ¬øCu√°l es la diferencia de ingresos entre la persona con m√°s ingresos y la persona con menos ingresos?
* ¬øCu√°l es la diferencia de escolaridad entre la persona con m√°s a√±os de escolaridad y la persona con menos escolaridad?


# III. Lenguaje orientado a objetos
*Podemos guardar objetos con `<-`*

Con esto guardamos objetos con determinados valores. Podemos guardar variables con los nombres y valores que necesitemos. 

#### a) Guarda valores en variables
```{r}
a <- 10
b <- 5
```

```{r}
print(a) # muestra el valor del objeto a
print(b) # muestra el valor del objeto b
```

#### b) Utiliza los valores guardados en operaciones
```{r}
suma <- a + b
multiplicaci√≥n <- suma * 2
```

```{r}
suma  # Muestra el velor del objeto "suma" que contiene la suma entre a y b
multiplicaci√≥n  # Muestra el resultado de la multiplicaci√≥n entre la suma por 2
```

### Desaf√≠o pr√°ctico
1Ô∏è‚É£ Guarde una variable X con valor 12

2Ô∏è‚É£ Guarde una variable Y como X + 10

3Ô∏è‚É£ Guarde con el nombre CAPIBARA la multiplicaci√≥n entre X e Y


### üî∂ ¬°Ejercicio! An√°lisis de la Poblaci√≥n creando objetos
Vamos a organizar los datos anteriores en objetos para realizar el an√°lisis.

üîπ Datos:

* Edad (en a√±os) de las personas: 31, 53, 35, 61, 46, 29, 45, 50, 22, 27
* Ingresos mensuales (en CLP) : 480000, 150000, 300000, 120000, 250000, 340000, 240000, 620000, 550000, 450000
* A√±os de escolaridad : 5, 1, 3, 0, 2, 4, 3, 8, 6, 5

#### a) Crear objetos con los datos
Vamos a crear tres objetos (variables):

* edades
* ingresos
* escolaridad

```{r}
edades <- c(31, 53, 35, 61, 46, 29, 45, 50, 22, 27)
ingresos <- c(480000, 150000, 300000, 120000, 250000, 340000, 240000, 620000, 550000, 450000)
```

```{r}
escolaridad <- c(5, 1, 3, 0, 2, 4, 3, 8, 6, 5)
```

#### b) Realizar c√°lculos con los objetos
Vamos a calcular algunas estad√≠sticas b√°sicas utilizando las funciones que aprendimos anteriormente: suma, promedio (media), mediana, dato m√≠nimo y dato m√°ximo.

```{r}
# Suma total de las edades
total_edades <- sum(edades)
```

```{r}
# Promedio de los ingresos
promedio_ingresos <- mean(ingresos)
```

```{r}
# Mediana de los a√±os de escolaridad
mediana_escolaridad <- median(escolaridad)
```

```{r}
# M√≠nimo de las edades
min_edad <- min(edades)
```

```{r}
# M√°ximo de los ingresos
max_ingreso <- max(ingresos)
```

```{r}
# Imprimir los resultados
total_edades
promedio_ingresos
mediana_escolaridad
min_edad
max_ingreso
```

#### üìç Guarda los Resultados en Objetos:
* Guarda total_edades con el nombre resultado_edades
* Guarda promedio_ingresos con el nombre resultado_ingresos
* Guarda mediana_escolaridad con el nombre resultado_escolaridad
* Imprime los resultados guardados

```{r}
 


```


# IV. Indexaci√≥n

La indexaci√≥n en R permite acceder a elementos espec√≠ficos de un vector o una matriz utilizando sus posiciones.

### a) Crear los vectores

Primero, creamos los vectores con los datos proporcionados (edad, ingresos y escolaridad). Los vectores se crean con la siguiente estructura `c(dato,dato,dato,dato)`.

Este paso ya se realiz√≥ previamente creando las variables `edades`, `ingresos` y `escolaridad`.

```{r}
edades <- c(31, 53, 35, 61, 46, 29, 45, 50, 22, 27)
ingresos <- c(480000, 150000, 300000, 120000, 250000, 340000, 240000, 620000, 550000, 450000)
escolaridad <- c(5, 1, 3, 0, 2, 4, 3, 8, 6, 5)
```

### b) Acceder a Elementos Espec√≠ficos Usando Indexaci√≥n

Ahora vamos a acceder a elementos espec√≠ficos de los vectores utilizando `[]`.

Utilizaremos la indexaci√≥n para obtener:

- La edad de la tercera persona
- El ingreso de la s√©ptima persona
- Los primeros tres a√±os de escolaridad

```{r}
# Edad de la tercera persona
edad_tercera_persona <- edades[3] # la edad de la persona en la posici√≥n 3

# Ingreso de la s√©ptima persona
ingreso_septima_persona <- ingresos[7] # los ingresos de la persona en la posici√≥n 7

# Primeros tres a√±os de escolaridad
primeros_tres_escolaridad <- escolaridad[1:3] # los a√±os de escolaridad desde la posici√≥n 1 a la 3
```

### Imprimir los resultados

```{r}
edad_tercera_persona
ingreso_septima_persona
primeros_tres_escolaridad
```

### üî∂ ¬°Ejercicio!

Identifica los ingresos mayores a 300.000 y guarda el resultado en un objeto llamado `ingresos_altos`.

```{r}
# Personas con ingresos superiores a 300.000 CLP
ingresos_altos <- ingresos[ingresos > 300000]
```

#### Imprime resultados

```{r}
ingresos_altos
```

üìç **¬°Ahora t√∫!** Identifica los ingresos menores a 300.000 y guarda el resultado en un objeto llamado `ingresos_bajos`.

```{r}



```


‚ö° **OJO!** Diferencia los `[]` de los `()`.

- Los `[]` indican posiciones.
- Los `()` encierran argumentos.


# V. Tipos de Variables y Estructuras de Datos en R

### Tipos de Variables

- **Integer (Entero)**: Representa n√∫meros enteros. Especificado con `L` despu√©s del n√∫mero (e.g., `34L`).
  
  ```{r}
  x <- 34L
  class(x) # devuelve "integer"
  ```

- **Numeric (Num√©rico)**: Incluye tanto n√∫meros enteros como decimales.
  
  ```{r}
  x <- 34.5
  class(x) # devuelve "numeric"
  ```

- **Character (Car√°cter)**: Almacena texto y se define entre comillas dobles o simples.
  
  ```{r}
  x <- "Hola mundo"
  class(x) # devuelve "character"
  ```

- **Logical (L√≥gico)**: Almacena valores booleanos: `TRUE` o `FALSE`.
  
  ```{r}
  x <- TRUE
  class(x) # devuelve "logical"
  ```

- **Factor**: Utilizado para datos categ√≥ricos con un n√∫mero fijo de categor√≠as √∫nicas. Suele usarse para datos ordinales.
  
  ```{r}
  x <- factor(c("bajo", "medio", "alto"))
  class(x) # devuelve "factor"
  ```

### üî∂ ¬°Ejercicio!

Obtenga qu√© tipos de variables corresponden a las variables `edades`, `ingresos` y `escolaridad`, utilizando `class()`.

```{r}



```


# VI. Data Frames

### Creaci√≥n y Exploraci√≥n de Data Frames

#### 1. Crear los vectores con los datos (variables de la base de datos)

```{r}
edades <- c(31, 53, 35, 61, 46, 29, 45, 50, 22, 27)
ingresos <- c(480000, 150000, 300000, 120000, 250000, 340000, 240000, 620000, 550000, 450000)
escolaridad <- c(5, 1, 3, 0, 2, 4, 3, 8, 6, 5)
```

‚ö° **OJO!** Recuerde que los vectores deben tener la misma longitud, es decir, la misma cantidad de elementos. En este caso, cada vector tiene 10 elementos, pues la muestra corresponde a 10 personas.

#### 2. Crear el data frame con `data.frame()` otorg√°ndole el nombre `desigualdad_poblacion` y finalmente impr√≠melo para verlo.

```{r}
desigualdad_poblacion <- data.frame(edades, ingresos, escolaridad)
desigualdad_poblacion
```

#### 3. Explorar la base de datos

Aplica las siguientes funciones a la base `desigualdad_poblacion`:

#### 1. Instalamos y cargamos los paquetes necesarios

```{r}
summary(desigualdad_poblacion) # Sumario general
nrow(desigualdad_poblacion) # N√∫mero de filas (casos)
ncol(desigualdad_poblacion) # N√∫mero de columnas
names(desigualdad_poblacion) # Nombres de las variables
```

## üîπ Conclusiones 

Tras analizar los datos recopilados, se pueden observar desigualdades significativas en t√©rminos de ingresos mensuales y a√±os de escolaridad dentro de la comunidad.

El an√°lisis de estos datos nos muestra una comunidad con desigualdades marcadas en ingresos y educaci√≥n, lo que probablemente impacta otras dimensiones de la vida, como la estabilidad laboral, el acceso a la salud y la movilidad social.


# VII. Proceso inicial de an√°lisis de datos

## 1. Instalar y llamar los paquetes a utilizar 
```{r}
options(repos = c(CRAN = "https://cloud.r-project.org"))
install.packages("haven") #abrir bases de datos
library(haven)
install.packages("tidyverse") #herramientas tidyverse 
library(tidyverse)
library(readxl)#para abrir bases en formato excell
install.packages("openxlsx")
library(openxlsx)
```

## 2. Importar base de datos (abrir la base)
En RStudio, podemos importar bases de datos que est√©n en distintos formatos. Por ej. bases de datos en Excell, como la que utilizamos el curso pasado. Tambi√©n existen otros formatos como SCV, DTA, SAV, etc. 

### a) Abrir base de datos en formato Excell
**1. read_excel()_ xlsx**
```{r}
library(readxl)
base_antropologia_limpia <- read_excel("/Users/fran/Desktop/AyudantiÃÅas Cuanti 2 R/AyudantiÃÅas markdown/base_antropologia_limpia.xlsx")
```


**2. read.xlsx(): xlsx** 

Abriremos el archivo, en pesta√±a 1 y que empiece en fila 1 en este caso.

La funci√≥n startRow = ; indica desde que fila empezar

La funci√≥n cols ajusta el rango seg√∫n el n√∫mero total de columnas. 
Parte desde la columna 5 hasta la 147 que es la √∫ltima. 
Esto lo hacemos para borrar las columnas que obtengan informaci√≥n personal de los entrevistadores y as√≠ resguardar la confidencialidad.
```{r}
base_antropologia_limpia <- read.xlsx(xlsxFile = "/Users/fran/Desktop/AyudantiÃÅas Cuanti 2 R/AyudantiÃÅas markdown/base_antropologia_limpia.xlsx", 
                                 sheet = 1, startRow = 1, cols = 5:147)  

base_antropologia_limpia

names(base_antropologia_limpia)
```


### b) Abrir archivo CSV 
**read.csv()**

Est√° en tidyverse
```{r}
library (tidyverse) 

```
`c19 <- read_csv(file ="/Users/fran/Desktop/AyudantiÃÅas Cuanti 2 R/AyudantiÃÅas markdown/Ayudant√≠a 1/2024 MESU BBDD/MESU 2024_v2.csv")`


#### Recordemos ¬øPara qu√© sirve el siguiente c√≥digo? `remove(list = ls())`


### üî∂ Pr√°ctica: 
Si quisiera abrir una base de datos llamada base_antropolog√≠a.xlsx y guardarla con el nombre base, que parta desde la fila 6 y desde la columna 4 ¬øc√≥mo deber√≠a completar el siguiente c√≥digo?

* Completa:


_________ <- read.xlsx(xlsxFile = "/file/_________", 
                                 sheet = 1, startRow = ____, cols = ___) 


## 3. Exploraci√≥n de la base de datos

* summary
* glimpse
* names
* ncol
* nrow


### üî∂ Completa el c√≥digo con la funci√≥n seg√∫n corresponda:

#### N√∫mero de filas (casos)
____(base_antropologia_limpia) 


#### N√∫mero de columnas
____(base_antropologia_limpia) 


#### Nombres de las variables
____(base_antropologia_limpia) 


#### Vistazo inicial
____(base_antropologia_limpia)


#### Sumario general
____(base_antropologia_limpia) 









